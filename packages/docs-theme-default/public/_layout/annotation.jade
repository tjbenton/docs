mixin annotations(type, token, parent)
  if Array.isArray(token)
    each item in token
      +annotations(type, item, parent)
  else
    - var elem = type === 'header' ? 'header' : 'section'
    - var cls = 'c-token c-token--' + type
    
    if token.access
      - cls += ' is-' + token.access
    
    #{elem}(class="#{cls}")
      each data, name in token
        if name === 'inline'
          - var parent = _.clone(token)
          - delete parent.inline
          +annotations('inline', token.inline, parent)
        else
          +annotation(name, data, token, parent)

mixin annotation(name, data, token, parent)
  if name !== 'blockinfo' && name !== 'inline'
    - var blockinfo = JSON.stringify((token || {}).blockinfo || {})
    - var token_name = ((token || {}).name || '').toLowerCase()
    - var id = name + '-' + global.base_x.encode(token_name + blockinfo)
    != partial('../_annotations/' + name, { data: data, token: token || {}, parent: parent || {}, id: id })

article.docs-o-container
  if header && Object.keys(header).length
    +annotations('header', header)
  
  if body && body.length
    +annotations('body', body)
