mixin annotations(type, token)
  if Array.isArray(token)
    each item in token
      +annotations(type, item)
  else
    - var elem = type === 'header' ? 'header' : 'section'
    - var cls = 'c-token-' + type
    
    if token.access
      - cls += ' is-' + token.access
    
    #{elem}(class="#{cls}")
      each data, name in token
        if name === 'inline'
          +annotations('inline', token.inline)
        else
          +annotation(name, data, token)

mixin annotation(name, data, token)
  if name !== 'blockinfo' && name !== 'inline'
    - var filepath = token && token.blockinfo ? token.blockinfo.file.path : ''
    - var id = name + '-' + global.base_x.encode(JSON.stringify(data) + filepath)
    //- if name === 'raw-code'
    != partial('../_annotations/' + name, { data: data, token: token || {}, id: id })

article.docs-o-container
  if header && Object.keys(header).length
    +annotations('header', header)
  
  if body && body.length
    +annotations('body', body)
